(function e(t,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r();else if(typeof define==="function"&&define.amd)define([],r);else if(typeof exports==="object")exports["composeApp"]=r();else t["composeApp"]=r()})(globalThis,(()=>(()=>{var e={353:(e,t,r)=>{"use strict";var s=r(150);var o=r.n(s);let n=null;const a="kristine-db";async function c(){let e=await o()({locateFile:e=>"/sql-wasm.wasm"});try{const t=await u(a);if(t){n=new e.Database(t);console.log("Database loaded from cache")}else{n=new e.Database;console.log("New database created")}}catch(t){console.error("Error loading database from cache:",t);n=new e.Database}}async function i(e,t){return new Promise(((r,s)=>{const o=indexedDB.open("KristineDB",1);o.onupgradeneeded=function(e){const t=e.target.result;if(!t.objectStoreNames.contains("databases")){t.createObjectStore("databases")}};o.onsuccess=function(o){const n=o.target.result;const a=n.transaction(["databases"],"readwrite");const c=a.objectStore("databases");const i=c.put(t,e);i.onsuccess=()=>r();i.onerror=()=>s(i.error);a.oncomplete=()=>n.close()};o.onerror=function(){s(o.error)}}))}async function u(e){return new Promise(((t,r)=>{const s=indexedDB.open("KristineDB",1);s.onupgradeneeded=function(e){const t=e.target.result;if(!t.objectStoreNames.contains("databases")){t.createObjectStore("databases")}};s.onsuccess=function(s){const o=s.target.result;const n=o.transaction(["databases"],"readonly");const a=n.objectStore("databases");const c=a.get(e);c.onsuccess=()=>t(c.result);c.onerror=()=>r(c.error);n.oncomplete=()=>o.close()};s.onerror=function(){r(s.error)}}))}function l(){const e=this.data;switch(e&&e.action){case"exec":if(!e["sql"]){throw new Error("exec: Missing query string")}const t=n.exec(e.sql,e.params)[0]??{values:[]};const r=n.export();i(a,r).catch((e=>console.error("Error saving database:",e)));return postMessage({id:e.id,results:t});case"begin_transaction":return postMessage({id:e.id,results:n.exec("BEGIN TRANSACTION;")});case"end_transaction":const s=n.exec("END TRANSACTION;");const o=n.export();i(a,o).catch((e=>console.error("Error saving database after transaction:",e)));return postMessage({id:e.id,results:s});case"rollback_transaction":return postMessage({id:e.id,results:n.exec("ROLLBACK TRANSACTION;")});case"save_database":try{const t=n.export();i(a,t);return postMessage({id:e.id,results:{success:true}})}catch(t){return postMessage({id:e.id,error:t.message})}default:throw new Error(`Unsupported action: ${e&&e.action}`)}}function d(e){return postMessage({id:this.data.id,error:e})}if(typeof importScripts==="function"){n=null;const e=c();self.onmessage=t=>e.then(l.bind(t)).catch(d.bind(t))}},457:()=>{},115:()=>{},191:()=>{}};var t={};function r(s){var o=t[s];if(o!==undefined){return o.exports}var n=t[s]={id:s,loaded:false,exports:{}};e[s](n,n.exports,r);n.loaded=true;return n.exports}r.m=e;r.x=()=>{var e=r.O(undefined,[150],(()=>r(353)));e=r.O(e);return e};(()=>{var e=[];r.O=(t,s,o,n)=>{if(s){n=n||0;for(var a=e.length;a>0&&e[a-1][2]>n;a--)e[a]=e[a-1];e[a]=[s,o,n];return}var c=Infinity;for(var a=0;a<e.length;a++){var[s,o,n]=e[a];var i=true;for(var u=0;u<s.length;u++){if((n&1===0||c>=n)&&Object.keys(r.O).every((e=>r.O[e](s[u])))){s.splice(u--,1)}else{i=false;if(n<c)c=n}}if(i){e.splice(a--,1);var l=o();if(l!==undefined)t=l}}return t}})();(()=>{r.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;r.d(t,{a:t});return t}})();(()=>{r.d=(e,t)=>{for(var s in t){if(r.o(t,s)&&!r.o(e,s)){Object.defineProperty(e,s,{enumerable:true,get:t[s]})}}}})();(()=>{r.f={};r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,s)=>{r.f[s](e,t);return t}),[]))})();(()=>{r.u=e=>""+e+".js"})();(()=>{r.g=function(){if(typeof globalThis==="object")return globalThis;try{return this||new Function("return this")()}catch(e){if(typeof window==="object")return window}}()})();(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{r.nmd=e=>{e.paths=[];if(!e.children)e.children=[];return e}})();(()=>{var e;if(r.g.importScripts)e=r.g.location+"";var t=r.g.document;if(!e&&t){if(t.currentScript&&t.currentScript.tagName.toUpperCase()==="SCRIPT")e=t.currentScript.src;if(!e){var s=t.getElementsByTagName("script");if(s.length){var o=s.length-1;while(o>-1&&(!e||!/^http(s?):/.test(e)))e=s[o--].src}}}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/");r.p=e})();(()=>{var e={169:1};var t=t=>{var[s,n,a]=t;for(var c in n){if(r.o(n,c)){r.m[c]=n[c]}}if(a)a(r);while(s.length)e[s.pop()]=1;o(t)};r.f.i=(t,s)=>{if(!e[t]){if(true){importScripts(r.p+r.u(t))}}};var s=globalThis["webpackChunkcomposeApp"]=globalThis["webpackChunkcomposeApp"]||[];var o=s.push.bind(s);s.push=t})();(()=>{var e=r.x;r.x=()=>r.e(150).then(e)})();var s=r.x();return s})()));
//# sourceMappingURL=169.js.map